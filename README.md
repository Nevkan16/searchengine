# SEARCH_ENGINE поисковый движок

SEARCH_ENGINE — это веб-приложение для индексирования веб-сайтов и выполнения поисковых запросов.
Приложение включает инструменты для управления процессом индексации, мониторинга статуса индексированных сайтов и отображения результатов поиска.

### Вкладка DASHBOARD

На вкладке отображается статистика по индексируемым сайтам:

### Общая информация:

* Количество сайтов.
* Количество страниц.
* Количество уникальных лемм.
* Текущий статус процесса индексации.

### Состояние сайтов:

* `INDEXED` – Сайт успешно проиндексирован.

* `INDEXING` – Сайт находится в процессе индексации.

* `FAILED` – Сайт недоступен.


![12](https://github.com/user-attachments/assets/6237844b-815e-4c08-bbfb-b16286d3d02c)

API: GET `/api/statistics`
* Формат ответа:
```json
{
"result": true,
"statistics": {
"total": {
"sites": 10,
"pages": 436423,
"lemmas": 5127891,
"indexing": true
},
"detailed": [
{
"url": "http://www.site.com",
"name": "Имя сайта",
"status": "INDEXED",
"statusTime": 1600160357,
"error": "Ошибка индексации: главная страница сайта недоступна",
"pages": 5764,
"lemmas": 321115
}
]
}
}
```
### Вкладка MANAGEMENT

Кнопка START INDEXING запускает процесс индексации всех сайтов.

![8](https://github.com/user-attachments/assets/223fdaca-f1a0-4bc3-b126-53572b4bdae4)

API: GET `/api/startIndexing`

* Успешный ответ:
```json
{
"result": true
}
```
* Ответ при ошибке:
```json
{
"result": false,
"error": "Индексация уже запущена"
}
```

Кнопка STOP INDEXING останавливает текущий процесс индексации.

![10](https://github.com/user-attachments/assets/71eeeba7-d251-49fa-b140-3195bcf63107)

API: GET `/api/stopIndexing`

* Успешный ответ:
```json
{
"result": true
}
```
* Ответ при ошибке:
```json
{
"result": false,
"error": "Индексация не запущена"
}
```
Кнопка ADD/UPDATE добавляет или обновляет страницу сайта, указанного в конфигурационном файле.

![13](https://github.com/user-attachments/assets/3af03f9e-2ac3-46ea-a91c-0fe60bf423ad)


* Успешный ответ:
```json
{
"result": true
}
```
 Сообщение в браузере:

`Страница поставлена в очередь на обновление / добавление.`

* Ответ при ошибке:
```json
{
"result": false,
"error": "Данная страница находится за пределами сайтов, указанных в конфигурационном файле"
}
```        
Сообщение в браузере:

`Данная страница находится за пределами сайтов, указанных в конфигурационном файле`

### Вкладка SEARCH
Обрабатывает поисковые запросы и отображает релевантные результаты. Поиск можно выполнять по всем сайтам или по одному из выпадающего списка.

![3](https://github.com/user-attachments/assets/e4cf1cf6-2fea-45b6-9701-a46e1417ea66)

API: GET `/api/search`
* Формат ответа:
```json
{
"result": true,
"count": 574,
"data": [
{
"site": "http://www.site.com",
"siteName": "Имя сайта",
"uri": "/path/to/page/6784",
"title": "Заголовок страницы",
"snippet": "Фрагмент текста, в котором найдены совпадения, <b>выделенные жирным</b>, в формате HTML.",
"relevance": 0.93362
}
]
}
```
### Используемые технологии
* **Java 17**
* **Spring Boot 2.7.1**
* **MySQL**
* **Apache Lucene Morphology**
* **Jsoup**
* **Lombok**

## Инструкция по запуску.

Добавьте или удалите сайты для индексации в конфигурационном файле `application.yaml`
```yaml
indexing-settings:
sites:
- url: https://www.site1.ru
name: Сайт_1
- url: https://www.site2.ru
name: Сайт_2
- url: https://site3.ru/
name: Сайт_3
```
Запустите приложение.

* Проверьте отображение главной вкладки `DASHBOARD` в браузере.
* На вкладке `MANAGEMENT` используйте кнопку `START INDEXING` для запуска процесса индексации.
* Используйте `STOP INDEXING` для остановки индексации.

* Используйте `ADD/UPDATE` для добавления, обновления отдельной страницы сайта.

Например: `https://www.site1.ru/about`


* Для вывода поискового запроса на вкладке `SEARCH`
введите запрос в строке поиска, для получения отображения результатов запроса.
